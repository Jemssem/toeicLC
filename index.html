<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í† ìµ íŒŒíŠ¸ 2 í€´ì¦ˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .quiz-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .question-area {
            margin-bottom: 30px;
        }
        .play-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 20px;
        }
        .play-button:hover {
            background-color: #0056b3;
        }
        .options-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }
        .options-list li {
            margin-bottom: 10px;
        }
        .option-button {
            background-color: #e2e2e2;
            color: #333;
            border: 1px solid #ccc;
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            text-align: left;
            transition: background-color 0.3s ease;
        }
        .option-button:hover {
            background-color: #d0d0d0;
        }
        .option-button.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        .option-button.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        .script-area {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            text-align: left;
        }
        .script-area h2 {
            color: #555;
            margin-bottom: 10px;
        }
        .script-text {
            white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ ìœ ì§€ */
            line-height: 1.6;
            margin-bottom: 10px;
        }
        .script-text.hidden {
            display: none;
        }
        .result-message {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }
        .result-message.correct {
            color: #28a745;
        }
        .result-message.incorrect {
            color: #dc3545;
        }
        .next-question-button {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        .next-question-button:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>í† ìµ íŒŒíŠ¸ 2 í€´ì¦ˆ</h1>

        <div class="question-area">
            <button class="play-button" onclick="playQuestionAndOptions()">ì§ˆë¬¸ ë° ë³´ê¸° ë“£ê¸° (ì˜êµ­ ë°œìŒ)</button>
        </div>

        <ul class="options-list" id="optionsList">
            <li><button class="option-button" data-index="0" onclick="checkAnswer(this)">(A)</button></li>
            <li><button class="option-button" data-index="1" onclick="checkAnswer(this)">(B)</button></li>
            <li><button class="option-button" data-index="2" onclick="checkAnswer(this)">(C)</button></li>
        </ul>

        <div class="result-message" id="resultMessage"></div>

        <div class="script-area" id="scriptArea">
            <h2>ìŠ¤í¬ë¦½íŠ¸</h2>
            <p class="script-text hidden" id="questionEnglishScript"></p>
            <p class="script-text hidden" id="questionKoreanScript"></p>
            <p class="script-text hidden" id="optionsEnglishScript"></p>
            <p class="script-text hidden" id="optionsKoreanScript"></p>
        </div>
        <button class="next-question-button" onclick="loadNextQuestion()" style="display: none;">ë‹¤ìŒ ë¬¸ì œ</button>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let questions = [
            {
                question: "Whom should I give these receipts to?",
                koreanQuestion: "ëˆ„êµ¬ì—ê²Œ ì´ ì˜ìˆ˜ì¦ë“¤ì„ ì£¼ë©´ ë˜ë‚˜ìš”?",
                options: [
                    "Yes, by Friday.",
                    "I put it in the bag.",
                    "Martha in accounting."
                ],
                koreanOptions: [
                    "ë„¤, ê¸ˆìš”ì¼ê¹Œì§€ì…ë‹ˆë‹¤.",
                    "ê°€ë°©ì•ˆì— ë‘ì—ˆì–´ìš”.",
                    "íšŒê³„ë¶€ì˜ Marthaì—ê²Œìš”."
                ],
                correctAnswerIndex: 2
            },
            {
                question: "When are the department expense reports due?",
                koreanQuestion: "ì–¸ì œê¹Œì§€ ë¶€ì„œ ë¹„ìš© ë³´ê³ ì„œë¥¼ ë‚´ë©´ ë˜ë‚˜ìš”?",
                options: [
                    "It was very expensive.",
                    "They're due this Tuesday.",
                    "They will be here by 6 o'clock."
                ],
                koreanOptions: [
                    "ê·¸ê²ƒì€ ë§¤ìš° ë¹„ìŒŒì–´ìš”.",
                    "ì´ë²ˆ í™”ìš”ì¼ê¹Œì§€ì…ë‹ˆë‹¤.",
                    "ê·¸ë“¤ì€ 6ì‹œê¹Œì§€ ì—¬ê¸° ì˜¬êº¼ì—ìš”."
                ],
                correctAnswerIndex: 1
            },
            {
                question: "Where can I get a train ticket?",
                koreanQuestion: "ì–´ë””ì„œ ê¸°ì°¨í‘œë¥¼ ì‚´ ìˆ˜ ìˆì„ê¹Œìš”?",
                options: [
                    "They are sixty dollars round trip.",
                    "You have to go to the east wing.",
                    "I'm going to visit my grandparents."
                ],
                koreanOptions: [
                    "ì™•ë³µì—¬í–‰ìœ¼ë¡œ 60ë‹¬ëŸ¬ì…ë‹ˆë‹¤.",
                    "ë™ìª½ ë³„ê´€ìœ¼ë¡œ ê°€ì…”ì•¼ í•©ë‹ˆë‹¤.",
                    "ì €í¬ ì¡°ë¶€ëª¨ë‹˜ëŒì„ ë°©ë¬¸í•  ê»ë‹ˆë‹¤."
                ],
                correctAnswerIndex: 1
            },
             {
                question: "Why do you want to move to Tennessee?",
                koreanQuestion: "ì™œ í…Œë„¤ì‹œ ì£¼ë¡œ ì´ì‚¬í•˜ë ¤ê³  í•˜ì‹œë‚˜ìš”?",
                options: [
                    "To look after my parents.",
                    "On July 15.",
                    "It sounds like a nice plan."
                ],
                koreanOptions: [
                    "ë¶€ëª¨ë‹˜ë“¤ì„ ëŒë³´ê¸° ìœ„í•´ì„œìš”.",
                    "7ì›” 16ì¼ì—ìš”.",
                    "ì¢‹ì€ ê³„íš ê°™ë„¤ìš”."
                ],
                correctAnswerIndex: 0
            },
            {
                question: "Who told you to give me these files?",
                koreanQuestion: "ëˆ„ê°€ ì´ íŒŒì¼ë“¤ì„ ì €ì—ê²Œ ì£¼ë¼ê³  ë§í–ˆë‚˜ìš”?",
                options: [
                    "I put them on your desk this morning.",
                    "I haven't filed them yet, but I will as soon as I can.",
                    "Maria in accounting said you had to sign them."
                ],
                koreanOptions: [
                    "ì˜¤ëŠ˜ ì•„ì¹¨ ë‹¹ì‹ ì˜ ì±…ìƒì— ê·¸ê²ƒë“¤ì„ ë‘ì—ˆì–´ìš”.",
                    "ì•„ì§ íŒŒì¼ë¡œ ì •ë¦¬í•´ë‘ì§€ ì•Šì•˜ì§€ë§Œ, í•  ìˆ˜ ìˆëŠ”í•œ ë¹¨ë¦¬ í• ê»˜ìš”.",
                    "íšŒê³„ë¶€ì˜ Mariaê°€ ë‹¹ì‹ ì´ ì„œëª…ì´ í•„ìš”í•˜ë‹¤ê³  ë§í–ˆì–´ìš”."
                ],
                correctAnswerIndex: 2
            },
            {
                question: "Where did you go on vacation?",
                koreanQuestion: "ì–´ë””ë¡œ íœ´ê°€ë¥¼ ë‹¤ë…€ì˜¤ì…¨ë‚˜ìš”?",
                options: [
                    "For ten days.",
                    "I just bought my ticket.",
                    "I went to Morocco for a week."
                ],
                koreanOptions: [
                    "10ì¼ ë™ì•ˆì´ìš”.",
                    "ë§‰ í‹°ì¼“ì„ êµ¬ë§¤í–ˆì–´ìš”.",
                    "ì¼ì£¼ì¼ë™ì•ˆ Moroccoì—ì„œ ê°”ì—ˆì–´ìš”."
                ],
                correctAnswerIndex: 2
            }
            // ì—¬ê¸°ì— ë” ë§ì€ ì§ˆë¬¸ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        ];

        const synth = window.speechSynthesis;
        let isPlayingAudio = false; // ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ ì—¬ë¶€ í”Œë˜ê·¸

        /**
         * ì§ˆë¬¸ê³¼ ë³´ê¸°ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì˜êµ­ ë°œìŒìœ¼ë¡œ ì¬ìƒí•©ë‹ˆë‹¤.
         */
        function playQuestionAndOptions() {
            if (isPlayingAudio) {
                // ì´ë¯¸ ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
                return;
            }
            isPlayingAudio = true; // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œì‘ í”Œë˜ê·¸ ì„¤ì •

            // ê¸°ì¡´ì— ì¬ìƒ ì¤‘ì¸ ìŒì„±ì´ ìˆë‹¤ë©´ ì¤‘ë‹¨
            if (synth.speaking) {
                synth.cancel();
            }

            const currentQuestion = questions[currentQuestionIndex];
            const questionUtterance = new SpeechSynthesisUtterance(currentQuestion.question);
            questionUtterance.lang = 'en-GB'; // ì˜êµ­ ë°œìŒ
            questionUtterance.rate = 0.9; // ì¬ìƒ ì†ë„

            let optionIndex = 0;

            // ì§ˆë¬¸ ìŒì„± ì¬ìƒì´ ëë‚˜ë©´ ë³´ê¸° ìŒì„± ì¬ìƒ ì‹œì‘
            questionUtterance.onend = () => {
                playNextOption();
            };

            // ë³´ê¸° ìŒì„±ì„ ìˆœì°¨ì ìœ¼ë¡œ ì¬ìƒí•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜
            function playNextOption() {
                if (optionIndex < currentQuestion.options.length) {
                    const optionText = `${String.fromCharCode(65 + optionIndex)}. ${currentQuestion.options[optionIndex]}`;
                    const optionUtterance = new SpeechSynthesisUtterance(optionText);
                    optionUtterance.lang = 'en-GB'; // ì˜êµ­ ë°œìŒ
                    optionUtterance.rate = 0.9;

                    optionUtterance.onend = () => {
                        optionIndex++;
                        playNextOption(); // ë‹¤ìŒ ë³´ê¸° ì¬ìƒ
                    };
                    synth.speak(optionUtterance);
                } else {
                    isPlayingAudio = false; // ëª¨ë“  ìŒì„± ì¬ìƒ ì™„ë£Œ
                }
            }

            synth.speak(questionUtterance); // ì§ˆë¬¸ ìŒì„± ì¬ìƒ ì‹œì‘
        }

        /**
         * ë‹¤ìŒ ë¬¸ì œë¥¼ ë¡œë“œí•˜ê³  UIë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
         */
        function loadQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            const optionsButtons = document.querySelectorAll('.option-button');
            const questionEnglishScript = document.getElementById('questionEnglishScript');
            const questionKoreanScript = document.getElementById('questionKoreanScript');
            const optionsEnglishScript = document.getElementById('optionsEnglishScript');
            const optionsKoreanScript = document.getElementById('optionsKoreanScript');
            const resultMessage = document.getElementById('resultMessage');
            const nextQuestionButton = document.querySelector('.next-question-button');
            
            isPlayingAudio = false; // ìƒˆë¡œìš´ ë¬¸ì œ ë¡œë“œ ì‹œ ì˜¤ë””ì˜¤ ì¬ìƒ ìƒíƒœ ì´ˆê¸°í™”
            if (synth.speaking) {
                synth.cancel();
            }

            // ì˜µì…˜ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì´ˆê¸°í™” ë° ë¹„í™œì„±í™” ìƒíƒœ í•´ì œ
            optionsButtons.forEach((button, index) => {
                button.textContent = `(${String.fromCharCode(65 + index)})`; // ë³´ê¸° ë¬¸í•­ë§Œ í‘œì‹œ
                button.classList.remove('correct', 'incorrect');
                button.disabled = false; // ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
            });

            // ìŠ¤í¬ë¦½íŠ¸ ë° ê²°ê³¼ ë©”ì‹œì§€ ìˆ¨ê¹€
            questionEnglishScript.classList.add('hidden');
            questionKoreanScript.classList.add('hidden');
            optionsEnglishScript.classList.add('hidden');
            optionsKoreanScript.classList.add('hidden');
            resultMessage.textContent = '';
            resultMessage.classList.remove('correct', 'incorrect');
            nextQuestionButton.style.display = 'none'; // ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼ ìˆ¨ê¹€

            // ì§ˆë¬¸ê³¼ ë³´ê¸° ìŒì„± ì¬ìƒ ì‹œì‘
            playQuestionAndOptions();
        }

        /**
         * ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µë³€ì„ í™•ì¸í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         * @param {HTMLButtonElement} selectedButton - ì‚¬ìš©ìê°€ í´ë¦­í•œ ë³´ê¸° ë²„íŠ¼ ìš”ì†Œ
         */
        function checkAnswer(selectedButton) {
            // ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ì´ë¼ë©´ ì¤‘ë‹¨
            if (isPlayingAudio) {
                synth.cancel();
                isPlayingAudio = false;
            }

            const selectedIndex = parseInt(selectedButton.dataset.index);
            const correctAnswerIndex = questions[currentQuestionIndex].correctAnswerIndex;
            const optionsButtons = document.querySelectorAll('.option-button');
            const questionEnglishScript = document.getElementById('questionEnglishScript');
            const questionKoreanScript = document.getElementById('questionKoreanScript');
            const optionsEnglishScript = document.getElementById('optionsEnglishScript');
            const optionsKoreanScript = document.getElementById('optionsKoreanScript');
            const resultMessage = document.getElementById('resultMessage');
            const nextQuestionButton = document.querySelector('.next-question-button');

            // ëª¨ë“  ì˜µì…˜ ë²„íŠ¼ ë¹„í™œì„±í™” (ë‹µë³€ ì„ íƒ í›„ ì¶”ê°€ ì„ íƒ ë°©ì§€)
            optionsButtons.forEach(button => {
                button.disabled = true;
            });

            // ì •ë‹µ ì—¬ë¶€ì— ë”°ë¼ ê²°ê³¼ ë©”ì‹œì§€ ë° ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            if (selectedIndex === correctAnswerIndex) {
                selectedButton.classList.add('correct');
                resultMessage.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                resultMessage.classList.add('correct');
                resultMessage.classList.remove('incorrect');
            } else {
                selectedButton.classList.add('incorrect');
                optionsButtons[correctAnswerIndex].classList.add('correct'); // ì •ë‹µ ë³´ê¸° ê°•ì¡°
                resultMessage.textContent = 'ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•´ ë³´ì„¸ìš”. ğŸ˜¢';
                resultMessage.classList.add('incorrect');
                resultMessage.classList.remove('correct');
            }

            // ëª¨ë“  ì˜µì…˜ ë²„íŠ¼ì— ì‹¤ì œ ìŠ¤í¬ë¦½íŠ¸ í…ìŠ¤íŠ¸ í‘œì‹œ
            optionsButtons.forEach((button, index) => {
                button.textContent = `(${String.fromCharCode(65 + index)}) ${questions[currentQuestionIndex].options[index]}`;
            });

            // ìŠ¤í¬ë¦½íŠ¸ ì˜ì—­ í‘œì‹œ ë° ë‚´ìš© ì±„ìš°ê¸°
            questionEnglishScript.textContent = `Q: ${questions[currentQuestionIndex].question}`;
            questionKoreanScript.textContent = `Q: ${questions[currentQuestionIndex].koreanQuestion}`;

            let englishOptionsText = 'Options (English):\n';
            questions[currentQuestionIndex].options.forEach((opt, idx) => {
                englishOptionsText += `(${String.fromCharCode(65 + idx)}) ${opt}\n`;
            });
            optionsEnglishScript.textContent = englishOptionsText;

            let koreanOptionsText = 'ë³´ê¸° (í•œê¸€):\n';
            questions[currentQuestionIndex].koreanOptions.forEach((opt, idx) => {
                koreanOptionsText += `(${String.fromCharCode(65 + idx)}) ${opt}\n`;
            });
            optionsKoreanScript.textContent = koreanOptionsText;

            questionEnglishScript.classList.remove('hidden');
            questionKoreanScript.classList.remove('hidden');
            optionsEnglishScript.classList.remove('hidden');
            optionsKoreanScript.classList.remove('hidden');

            nextQuestionButton.style.display = 'block'; // ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼ í‘œì‹œ
        }

        /**
         * ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™í•˜ê±°ë‚˜ ëª¨ë“  í€´ì¦ˆë¥¼ ì™„ë£Œí–ˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.
         */
        function loadNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= questions.length) {
                alert('ëª¨ë“  í€´ì¦ˆë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!');
                currentQuestionIndex = 0; // í€´ì¦ˆê°€ ëë‚˜ë©´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘
            }
            loadQuestion();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ë¬¸ì œ ë¡œë“œ
        window.onload = loadQuestion;
    </script>
</body>
</html>